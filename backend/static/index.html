    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Search Quality Evaluation</title>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
        <link href="styles.css" rel="stylesheet">
    </head>

    <body>
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <div class="brand-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <span class="brand-text">SearchEval</span>
                </div>

                <div class="nav-actions">
                    <div class="status-indicator status-healthy" id="health-status">
                        <i class="fas fa-circle-check"></i>
                        <span>API Healthy</span>
                    </div>

                    <button class="nav-btn theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <div class="hero-section">
                    <h1 class="hero-title">Search Quality Evaluation</h1>
                    <p class="hero-subtitle">Evaluate search relevance using advanced AI-powered analysis</p>
                </div>

                <!-- Evaluation Tabs -->
                <div class="evaluation-tabs">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="single">
                            <i class="fas fa-file-alt"></i>
                            Single Evaluation
                        </button>
                        <button class="tab-btn" data-tab="batch">
                            <i class="fas fa-files"></i>
                            Batch Evaluation
                        </button>
                    </div>

                    <!-- Single Evaluation Tab -->
                    <div class="tab-content active" id="singleTab">
                        <div class="evaluation-card">
                            <div class="card-header">
                                <h3>Evaluate Query Relevance</h3>
                                <p>Enter your search query and item details for AI-powered analysis</p>
                            </div>

                            <!-- Single Evaluation Stats -->
                            <div class="tab-stats">
                                <div class="stats-row">
                                    <div class="stat-item">
                                        <div class="stat-icon-small">
                                            <i class="fas fa-list"></i>
                                        </div>
                                        <div class="stat-info">
                                            <div class="stat-value" id="singleTotal">0</div>
                                            <div class="stat-label">Total Evaluations</div>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-icon-small">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                        <div class="stat-info">
                                            <div class="stat-value" id="singleAvgScore">0.0</div>
                                            <div class="stat-label">Avg Score</div>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-icon-small">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                        <div class="stat-info">
                                            <div class="stat-value" id="singleLastScore">-</div>
                                            <div class="stat-label">Last Score</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <form id="singleForm" class="evaluation-form">
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-search"></i>
                                            Search Query
                                        </label>
                                        <input type="text" class="form-input" id="query"
                                            placeholder="e.g., red running shoes" required>
                                        <div class="form-error">Please enter a search query</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-tag"></i>
                                            Item Title
                                        </label>
                                        <input type="text" class="form-input" id="itemTitle"
                                            placeholder="e.g., Nike Air Zoom Pegasus" required>
                                        <div class="form-error">Please enter an item title</div>
                                    </div>

                                    <div class="form-group full-width">
                                        <label class="form-label">
                                            <i class="fas fa-align-left"></i>
                                            Item Description
                                        </label>
                                        <textarea class="form-textarea" id="itemDescription" rows="4"
                                            placeholder="Detailed product description..." required></textarea>
                                        <div class="form-error">Please enter an item description</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-folder"></i>
                                            Category
                                        </label>
                                        <input type="text" class="form-input" id="itemCategory" placeholder="e.g., Footwear"
                                            required>
                                        <div class="form-error">Please enter a category</div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <i class="fas fa-list"></i>
                                            Attributes (JSON)
                                        </label>
                                        <input type="text" class="form-input" id="itemAttributes"
                                            placeholder='e.g., {"color": "red", "size": "10", "brand": "Nike"}' required>
                                        <div class="form-error">Please enter valid JSON attributes</div>
                                    </div>
                                </div>

                                <button type="submit" class="btn-primary">
                                    <i class="fas fa-play"></i>
                                    Evaluate
                                </button>
                            </form>
                        </div>

                        <!-- Single Results -->
                        <div class="results-card" id="singleResults" style="display: none;">
                            <div class="results-header">
                                <h3>Evaluation Results</h3>
                                <button class="btn-secondary" id="copySingleResult">
                                    <i class="fas fa-copy"></i>
                                    Copy
                                </button>
                            </div>

                            <div class="results-grid">
                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="metric-content">
                                        <div class="metric-value" id="scoreCircle">0</div>
                                        <div class="metric-label">Relevance Score</div>
                                    </div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-bullseye"></i>
                                    </div>
                                    <div class="metric-content">
                                        <div class="metric-value" id="confidenceText">0%</div>
                                        <div class="metric-label">Confidence</div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" id="confidenceBar"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="metric-content">
                                        <div class="metric-value reason-code" id="reasonCode">N/A</div>
                                        <div class="metric-label">Reason Code</div>
                                    </div>
                                </div>
                            </div>

                            <div class="ai-reasoning-section">
                                <div class="metric-card ai-reasoning-card">
                                    <div class="metric-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <div class="metric-content">
                                        <div class="metric-value" id="aiReasoning">N/A</div>
                                        <div class="metric-label">AI Reasoning</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Batch Evaluation Tab -->
                    <div class="tab-content" id="batchTab">
                        <div class="evaluation-card">
                            <div class="card-header">
                                <h3>Batch Evaluation</h3>
                                <p>Process multiple query-item pairs simultaneously</p>
                            </div>

                            <!-- Batch Evaluation Stats -->
                            <div class="tab-stats">
                                <div class="stats-row">
                                    <div class="stat-item">
                                        <div class="stat-icon-small">
                                            <i class="fas fa-tasks"></i>
                                        </div>
                                        <div class="stat-info">
                                            <div class="stat-value" id="batchTotal">0</div>
                                            <div class="stat-label">Total Batches</div>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-icon-small">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                        <div class="stat-info">
                                            <div class="stat-value" id="batchCompleted">0</div>
                                            <div class="stat-label">Completed</div>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-icon-small">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                        <div class="stat-info">
                                            <div class="stat-value" id="batchAvgScore">0.0</div>
                                            <div class="stat-label">Avg Score</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="batch-input-section">
                                <label class="form-label">
                                    <i class="fas fa-code"></i>
                                    Batch Data (JSON Array)
                                </label>
                                <textarea class="batch-textarea" id="batchInput" rows="12" placeholder='[
    {
        "query": "red running shoes",
        "item_title": "Nike Air Zoom Pegasus",
        "item_description": "Comfortable running shoes in red",
        "item_category": "Footwear",
        "item_attributes": {"color": "red", "size": "10", "brand": "Nike"}
    }
    ]'></textarea>

                                <div class="batch-actions">
                                    <button class="btn-secondary" id="loadSampleBtn">
                                        <i class="fas fa-magic"></i>
                                        Load Sample
                                    </button>
                                    <button class="btn-secondary" id="validateBatchBtn">
                                        <i class="fas fa-check"></i>
                                        Validate JSON
                                    </button>
                                    <button class="btn-primary" id="batchEvaluateBtn">
                                        <i class="fas fa-play"></i>
                                        Evaluate Batch
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Batch Results -->
                        <div class="results-card" id="batchResults" style="display: none;">
                            <div class="results-header">
                                <h3>Batch Results</h3>
                                <div class="results-actions">
                                    <div class="search-group">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="batchSearch" placeholder="Search results...">
                                    </div>
                                    <select id="scoreFilter" class="filter-select">
                                        <option value="">All Quality Assessments</option>
                                        <option value="excellent">EXCELLENT</option>
                                        <option value="informational">INFORMATIONAL</option>
                                        <option value="good">GOOD</option>
                                        <option value="okay">OKAY</option>
                                        <option value="bad">BAD</option>
                                        <option value="nonsensical">NONSENSICAL</option>
                                        <option value="embarrassing">EMBARRASSING</option>
                                        <option value="utd">UTD</option>
                                        <option value="pdnl">PDNL</option>
                                    </select>
                                    <button class="btn-secondary" id="exportJsonBtn">
                                        <i class="fas fa-download"></i>
                                        JSON
                                    </button>
                                    <button class="btn-secondary" id="exportCsvBtn">
                                        <i class="fas fa-file-csv"></i>
                                        CSV
                                    </button>
                                </div>
                            </div>

                            <div id="batchResultsList" class="batch-results-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- History Panel -->
        <div class="history-panel" id="historyPanel">
            <div class="history-header">
                <div class="history-title">
                    <i class="fas fa-history"></i>
                    Recent Evaluations
                </div>
                <div class="history-actions">
                    <button class="history-toggle" id="toggleHistory" title="Toggle History Panel">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <button class="history-clear" id="clearHistory" title="Clear History">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="history-list" id="historyList"></div>
        </div>

        <!-- Floating History Expand Button -->
        <button class="history-expand-btn" id="expandHistoryBtn" title="Show History Panel">
            <i class="fas fa-history"></i>
        </button>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-card">
                <div class="loading-spinner"></div>
                <div class="loading-text" id="loadingText">Evaluating with AI...</div>
                <div class="loading-subtext" id="loadingSubtext"></div>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="script.js?v=1.4"></script>
    </body>

    </html>